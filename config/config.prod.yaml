# 生产环境配置
# 高安全性、高可用性配置

# Redis 配置
redis:
  addr: "${REDIS_ADDR:redis-cluster:6379}"
  password: "${REDIS_PASSWORD}"
  db: 0
  pool_size: 200
  min_idle_conns: 20
  max_retries: 5
  dial_timeout: "10s"
  read_timeout: "5s"
  write_timeout: "5s"
  pool_timeout: "8s"
  cluster_mode: true
  cluster_addrs:
    - "${REDIS_NODE1:redis-node1:6379}"
    - "${REDIS_NODE2:redis-node2:6379}"
    - "${REDIS_NODE3:redis-node3:6379}"
  tls_enabled: true
  cert_file: "/etc/ssl/certs/redis-client.crt"
  key_file: "/etc/ssl/private/redis-client.key"
  ca_file: "/etc/ssl/certs/redis-ca.crt"

# 抽奖引擎配置
lottery:
  lock_timeout: "60s"
  retry_attempts: 5
  retry_interval: "200ms"
  lock_cache_ttl: "1s"

# 熔断器配置 (生产环境严格配置)
circuit_breaker:
  enabled: true
  name: "lottery-engine-prod"
  max_requests: 3
  interval: "120s"
  timeout: "60s"
  failure_ratio: 0.5
  min_requests: 5
  on_state_change: true
